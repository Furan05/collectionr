<div class="card-detail-container">
  <div class="card-inf">
    <div class="card-imag" data-tilt data-tilt-glare data-tilt-max-glare="0.4">
      <% if @card.tcg == "pokemon" %>
        <img src="<%= @card_info["images"]["large"] %>" alt="<%= @card_info["name"] %>">
      <% elsif @card.tcg == "yugiho" %>
        <img src="<%= @card_info["card_images"][0]["image_url"] %>" alt="<%= @card_info["name"] %>">
      <% end %>
    </div>

    <div class="card-stats">
      <h1><%= @card_info["name"] %></h1>

      <div class="price-history">
        <h2>Price History</h2>
        <canvas data-controller="chart"
              data-chart-price-history-value="<%= @price_history.to_json %>"
              id="priceChart">
        </canvas>
      </div>


      <div class="stats-grid">
        <% if @card.tcg == "pokemon" %>
          <div class="stat-item">
            <h3>Set</h3>
            <p><%= @card_info["set"]["name"] %></p>
          </div>

          <div class="stat-item">
            <h3>Rarity</h3>
            <p><%= @card_info["rarity"] %></p>
          </div>

          <div class="stat-item">
            <h3>Artist</h3>
            <p><%= @card_info["artist"] %></p>
          </div>

          <div class="stat-item">
            <h3>Number</h3>
            <p><%= @card_info["number"] %>/<%= @card_info["set"]["total"] %></p>
          </div>
        <% elsif @card.tcg == "yugiho" %>
          <div class="stat-item">
            <h3>Type</h3>
            <p><%= @card_info["type"] %></p>
          </div>

          <div class="stat-item">
            <h3>Race</h3>
            <p><%= @card_info["race"] %></p>
          </div>

          <div class="stat-item">
            <h3>Archetype</h3>
            <p><%= @card_info["archetype"] || "N/A" %></p>
          </div>

          <% if @card_info["atk"].present? %>
            <div class="stat-item">
              <h3>ATK/DEF</h3>
              <p><%= @card_info["atk"] %>/<%= @card_info["def"] %></p>
            </div>
          <% end %>
        <% end %>
      </div>

      <% if @card.tcg == "pokemon" && @card_info["attacks"] %>
        <div class="attacks">
          <h3>Attacks</h3>
          <% @card_info["attacks"].each do |attack| %>
            <div class="attack">
              <h4><%= attack["name"] %></h4>
              <p><%= attack["text"] %></p>
            </div>
          <% end %>
        </div>
      <% elsif @card.tcg == "yugiho" %>
        <div class="description">
          <h3>Description</h3>
          <p><%= @card_info["desc"] %></p>
        </div>
      <% end %>
    </div>
  </div>
</div>
